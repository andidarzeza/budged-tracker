<mat-progress-bar class="progress-bar {{sharedService.theme}}" mode="indeterminate" [@inOutAnimation] *ngIf="sharedService.stillLoading && sharedService.isSpinnerEnabled" style="position: absolute;top: 64px;left:0"></mat-progress-bar>

<app-budget-info (dateSelected)="onDateSelected($event)"></app-budget-info>


<div #categoryContainer class="category-container">
    <div class="avg-card-cnt">
        <mat-card class="bottom-margin right-margin average-cards {{sharedService.theme}}-table {{sharedService.theme}}-dashboard-card">
            <div class="chart-title" style="left: 10px;transform: none;">
                Average daily income
            </div>  
            <div class="cnt">
                <div class="average-income">
                    <span class="card-label">
                        {{dailyIncomeAverage | number:'1.2-2':'en-US'}} ALL
                        <span *ngIf="increaseInIncome>0" class="percentage-badge percentage-up">
                            <span>↑</span>{{increaseInIncome | number:'1.2-2':'en-US'}}%
                        </span>
                        <span *ngIf="increaseInIncome<0" class="percentage-badge percentage-down">
                            <span>&darr;</span>{{increaseInIncome | absoluteValue | number:'1.2-2':'en-US'}}%
                        </span>
                        <span *ngIf="increaseInIncome==0" class="percentage-badge">
                           {{increaseInIncome | absoluteValue | number:'1.2-2':'en-US'}}%
                        </span>
                    </span>
                    <div class="income-description">
                        Average daily income so far.
                    </div>
                </div>
            </div>
        </mat-card>
    
        <mat-card class="average-cards {{sharedService.theme}}-table {{sharedService.theme}}-dashboard-card">
            <div class="chart-title" style="left: 10px;transform: none;">
                Average daily expenses
            </div>  
            <div class="cnt">
                <div class="average-income">
                    <span class="card-label">
                        {{amountSpentAverage | number:'1.2-2':'en-US'}} ALL
                        <span *ngIf="increaseInExpense>0" class="percentage-badge percentage-down">
                            <span>↑</span>{{increaseInExpense | number:'1.2-2':'en-US'}}%
                        </span>
                        <span *ngIf="increaseInExpense<0" class="percentage-badge percentage-up">
                            <span>&darr;</span>{{increaseInExpense | absoluteValue | number:'1.2-2':'en-US'}}%
                        </span>
                        <span *ngIf="increaseInExpense==0" class="percentage-badge">
                            {{increaseInExpense | absoluteValue | number:'1.2-2':'en-US'}}%
                         </span>
                    </span>
                    <div class="income-description">
                        Average daily expenses so far.
                    </div>
                </div>
            </div>
        </mat-card>
    </div>

    <div class="chart-card-cnt">
        <mat-card class="card-bottom-margin right-margin chart-card {{sharedService.theme}}-table {{sharedService.theme}}-dashboard-card" style="position: relative;">
            <div class="chart-title" style="left: 10px;transform: none;">
                Income - {{totalIncome | number:'1.0':'en-US'}} ALL
            </div>
            <div *ngIf="totalIncome == 0" class="income-chart-container chart-title">
                <span class="no-data-message">
                    No Data to be displayed!
                </span>
            </div>
            <canvas id="incomes-chart"></canvas>
        </mat-card>
    
        <mat-card class="chart-card {{sharedService.theme}}-table {{sharedService.theme}}-dashboard-card" style="position: relative">
            <div class="chart-title" style="left: 10px;transform: none;">
                Amount spent - {{totalSpendings | number:'1.0':'en-US'}} ALL
            </div>
            <div *ngIf="totalSpendings == 0" class="income-chart-container chart-title">
                <span class="no-data-message">
                    No Data to be displayed!
                </span>
            </div>
            <canvas id="category-chart" style="position: absolute;top:50%;left:50%;transform:translate(-50%, -50%);max-height: calc(100% - 70px);max-width:80%;margin-top: 20px;"></canvas>
        </mat-card>
    </div>


    
</div>

<mat-card class="{{sharedService.theme}}-table {{sharedService.theme}}-dashboard-card" style="width: calc(100% - 60px);margin: auto;margin-top: 10px;height: 350px">
    <canvas id="daily-chart" style="width: 100%;height: 100%;max-height: 100%;min-height: 100%;"></canvas>
</mat-card>

<app-floating-menu [floatingMenu]="floatingMenu"></app-floating-menu>