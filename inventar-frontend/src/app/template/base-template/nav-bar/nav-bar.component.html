<mat-toolbar class="toolbar {{sharedService.theme}}" *ngIf="authenticationService.currentUserValue">
    <span>
        <button *ngIf="sharedService.mobileView" class="menu-item" mat-icon-button
            (click)="sidebarService.toggleSideBar()" style="margin-left: 18px;">
            <mat-icon class="{{sharedService.theme}}-icon">
                menu
            </mat-icon>
        </button>
    </span>
    <div class="menu-container">

        <div *ngIf="!sharedService.mobileView" class="menu-item pointer" (click)="toggleDarkMode()">
            <i *ngIf="!this.sharedService?.darkMode" style="font-size: 30px;"
                class="material-icons {{sharedService.theme}}-icon">nights_stay</i>
            <mat-icon *ngIf="this.sharedService?.darkMode" class="fullscreen-icon {{sharedService.theme}}-icon">wb_sunny
            </mat-icon>
        </div>

        <div class="flex-centered">
            <button class="user-name-button" mat-icon-button color="primary" [matMenuTriggerFor]="userMenu">
                <div class="user-name fw-500 {{sharedService.theme}}-user-circle">
                    {{ firstName?.charAt(0) | uppercase }}{{ lastName?.charAt(0) | uppercase }}
                </div>
            </button>
            <div [matMenuTriggerFor]="userMenu" class="pointer arrow-down-container">
                <mat-icon class="menu-item {{sharedService.theme}}-icon" style="margin-right: 0;">keyboard_arrow_down
                </mat-icon>
            </div>

            <mat-menu xPosition="before" class="{{sharedService.theme}}-user-menu user-menu" #userMenu="matMenu">
                <button class="{{sharedService.theme}}-user-menu-button" mat-menu-item>Logged in as
                    {{ firstName | titlecase }}
                    {{ lastName | titlecase }}</button>
                <mat-divider style="width: 100%;"></mat-divider>

                <button class="{{sharedService.theme}}-user-menu-button" mat-menu-item [matMenuTriggerFor]="balance">
                    <mat-icon class="{{sharedService.theme}}-icon">account_balance_wallet</mat-icon> Balance
                </button>
                <mat-divider style="width: 100%;"></mat-divider>
                <button class="{{sharedService.theme}}-user-menu-button" mat-menu-item [matMenuTriggerFor]="themes">
                    <mat-icon class="{{sharedService.theme}}-icon">color_lens</mat-icon> Themes
                </button>
                <mat-divider style="width: 100%;"></mat-divider>
                <button class="{{sharedService.theme}}-user-menu-button" (click)="logout()" mat-menu-item>
                    <mat-icon class="{{sharedService.theme}}-icon">exit_to_app</mat-icon>Logout
                </button>
            </mat-menu>

            <mat-menu class="{{sharedService.theme}}-themes-menu" #themes="matMenu">
                <button *ngFor="let theme of themesArray" mat-menu-item
                    class="flex-centered {{sharedService.theme}}-user-menu-button" style="justify-content: inherit;"
                    (click)="changeThemeColor(theme)">
                    <div class="round" [style.background-color]="theme.color"></div>
                    <span>{{theme.name}}</span>
                </button>
            </mat-menu>

            <mat-menu class="{{sharedService.theme}}-themes-menu" #balance="matMenu">
               <div (click) = "$event.stopPropagation()" class="balance-info">
                    <div style="padding: 16px;font-size: 16px;display: flex;align-items: center;">
                        <mat-icon style="color: rgba(0,0,0,.54)" class="{{sharedService.theme}}-icon">
                            account_balance_wallet
                        </mat-icon>
                        <span style="margin-left: 16px;">
                            Balance
                        </span>
                    </div>

                    <mat-divider></mat-divider>

                    <div style="max-height: 156px;overflow: auto;">
                        <div *ngFor="let bal of ['ALL', 'EUR', 'USD']" style="padding: 16px;display: flex;justify-content: space-between;align-items: center;">
                            <div>
                                {{bal | flag}} {{bal}}
                            </div>
                            <div>
                                200.0 $
                            </div>
                        </div>
                    </div>

                    <mat-divider></mat-divider>
                    <div style="padding: 16px;">
                        Total:
                    </div>
                    
               </div>
            </mat-menu>

        </div>
        <mat-divider [vertical]="true" class="vertical-divider"></mat-divider>

        <clock *ngIf="!sharedService.mobileView"></clock>
    </div>
</mat-toolbar>